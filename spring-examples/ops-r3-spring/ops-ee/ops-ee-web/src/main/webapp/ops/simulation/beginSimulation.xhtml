<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:parcel="http://java.sun.com/jsf/composite/parcel"
      xmlns:f="http://java.sun.com/jsf/core"
    >
<h:body>
  <h:head>

  </h:head>

  <ui:composition template="/templates/common/layout.xhtml">

    <ui:define name="content">

      <h:form>

        <p:dialog modal="true"
                  widgetVar="statusDialog"
                  header="Running Simulation"
                  draggable="false"
                  closable="false">

          <p:graphicImage value="/resources/images/ajaxloadingbar.gif"/>

        </p:dialog>

        <p:confirmDialog
            message="This will simulate shipments and parcels with Parcel Log Events.  If you entered a large number of shipments or parcels this may take a while.  Continue?"
            showEffect="bounce"
            hideEffect="explode"
            header="Begin Simulation"
            severity="alert"
            widgetVar="confirmation">

          <p:commandButton value="Begin"
                           update="panel"
                           onstart="confirmation.hide();statusDialog.show();status_message_poll.start();"
                           oncomplete="statusDialog.hide();status_message_poll.stop();"
                           actionListener="#{SimulatorControllerBean.beginSimulation}"/>

          <p:commandButton
              value="Abort"
              onclick="confirmation.hide()"
              type="button"/>

        </p:confirmDialog>

        <p:panel id="panel" header="Simulate Events">

          <p:messages/>


          <h:panelGrid columns="2" cellpadding="10">

            <div>
              <h:panelGrid columns="2" cellpadding="10">
                <h:outputText value="Number of Shipments"/>
                <h:inputText value="#{SimulatorControllerBean.inputNumberOfShipments}"/>

                <h:outputText value="Number of Parcels per Shipment"/>
                <h:inputText value="#{SimulatorControllerBean.inputNumberOfParcelsPerShipment}"/>

                <h:outputText value="Delay between Shipments"/>
                <h:inputText value="#{SimulatorControllerBean.inputShipmentDelay}"/>

                <h:outputText value="Delay between Parcel Events"/>
                <h:inputText value="#{SimulatorControllerBean.inputParcelEventDelay}"/>

                  <p:commandButton value="Begin Simulation"
                                   global="false"
                                   onclick="confirmation.show()"/>
              </h:panelGrid>
            </div>
          </h:panelGrid>
        </p:panel>
      </h:form>

    </ui:define>

  </ui:composition>
</h:body>

</html>